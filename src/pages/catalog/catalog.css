/* Loading & Error states */
.loading-state,
.error-state {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 2rem;
}

.error-content h2 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: var(--color-text);
}

.error-content p {
  color: #666;
}

/* STICKY WRAPPER */
/* ===== STICKY ===== */
.catalog-sticky-wrapper {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: var(--header-bg, #ffffff);
  border-bottom: 1px solid var(--border, #e5e7eb);
  transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.catalog-sticky-wrapper.is-stuck {
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
}

/* ===== HEADER ===== */
.catalog-header {
  overflow: hidden;
  background: white;
  position: relative;
}

.catalog-header.has-background-image {
  background-color: #1a1a1a;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.catalog-header.has-background-image::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 0;
}

.catalog-header.has-background-image .header-content {
  position: relative;
  z-index: 1;
}

.catalog-header.has-background-image .business-name,
.catalog-header.has-background-image .header-top-row h1 {
  color: white;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.catalog-header.has-background-image .header-bottom-row p,
.catalog-header.has-background-image .contact-item {
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
}

.catalog-header.has-background-image .contact-item i {
  color: white;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
}

.header-content {
  padding: 20px 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-width: 1200px;
  margin: 0 auto;
}

.header-top-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.business-logo {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #2563eb, #38bdf8);
  border-radius: 16px !important;
  flex-shrink: 0;
}

.business-logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: inherit;
}

.business-name {
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--text, #0f172a);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Map existing h1 id businessName to class style if needed, or ensure h1 uses this class structure */
.header-top-row h1 {
  font-size: 1.4rem;
  font-weight: 700;
  margin: 0;
  flex: 1;
  min-width: 0;
  /* Allow truncation */
}

.header-share-btn {
  background: var(--bg-light, #f1f5f9);
  border: none;
  color: var(--color-primary, #2563eb);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  cursor: pointer;
  transition: background-color 0.2s;
  flex-shrink: 0;
}

.header-share-btn:active {
  background-color: #e2e8f0;
}

.header-bottom-row {
  /* removed max-height to allow address/phone to flow */
  overflow: hidden;
}

.header-bottom-row p {
  color: var(--muted, #64748b);
  margin: 0;
}

.business-contact-info {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.contact-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--muted, #64748b);
  font-size: 0.9rem;
}

.contact-item i {
  color: var(--color-primary);
  font-size: 1rem;
}

/* ===== SEARCH ===== */
.catalog-search-container {
  padding: 10px 16px;
  background: white;
  z-index: 95;
  /* Ensure it stays above content */
}

.catalog-search-bar {
  display: flex;
  align-items: center;
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 12px;
  padding: 8px 12px;
  background: var(--bg-light, #f8fafc);
  max-width: 1200px;
  margin: 0 auto;
}

.catalog-search-bar:focus-within {
  border-color: var(--color-primary, #2563eb);
}

.catalog-search-bar i {
  color: var(--muted, #9ca3af);
  font-size: 1.1rem;
  margin-right: 0.75rem;
}

.catalog-search-bar input {
  width: 100%;
  border: none;
  outline: none;
  font-size: 0.95rem;
  background: transparent;
}

.catalog-search-clear {
  background: transparent;
  border: none;
  color: var(--muted, #9ca3af);
  cursor: pointer;
  padding: 0.25rem;
  display: flex;
  align-items: center;
}

/* Categories navigation */
.categories-nav {
  background: white;
  border-bottom: 1px solid var(--color-border);
  z-index: 90;
  overflow-x: auto;
  scrollbar-width: none;
}

.categories-nav::-webkit-scrollbar {
  display: none;
}

.categories-nav-track {
  display: flex;
  gap: 0.5rem;
  padding: 1rem 1.5rem 1rem 1rem;
  /* Extra padding on right */
  max-width: 1200px;
  margin: 0 auto;
  width: max-content;
  /* Ensure track takes full width of content for scrolling */
  min-width: 100%;
  /* Ensure it fills at least the screen */
}

.category-nav-btn {
  background: #f3f4f6;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  font-size: 0.9rem;
  white-space: nowrap;
  cursor: pointer;
  transition: all 0.2s;
  color: var(--color-text);
}

.category-nav-btn:hover {
  background: #e5e7eb;
}

.category-nav-btn.active {
  background: var(--color-primary);
  color: white;
}

/* Imperdibles button - Special styling */
.category-nav-imperdibles {
  background: #fbbf24;
  color: #000;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.category-nav-imperdibles:hover {
  background: #f59e0b;
}

.category-nav-imperdibles.active {
  background: #f59e0b;
  color: #000;
}

.category-nav-imperdibles i {
  font-size: 1rem;
}

/* Favoritos button - Special styling */
.category-nav-favoritos {
  background: #ec4899;
  color: white;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.category-nav-favoritos:hover {
  background: #db2777;
}

.category-nav-favoritos.active {
  background: #db2777;
  color: white;
}

.category-nav-favoritos i {
  font-size: 1rem;
}

/* Main content */
.catalog-main {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Promo Banner */
.promo-banner-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem 1rem 0 1rem;
}

/* Promo Carousel */
.promo-carousel {
  width: 100%;
  aspect-ratio: 16/9;
  border-radius: var(--radius-lg);
  overflow: hidden;
  position: relative;
  box-shadow: var(--shadow-sm);
  background: #f3f4f6;
  max-height: 400px;
  /* Limit height on large screens */
}

.promo-slides-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.promo-slide {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  transition: opacity 0.5s ease-in-out;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.promo-slide.active {
  opacity: 1;
  z-index: 1;
}

.promo-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.promo-placeholder {
  color: #9ca3af;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.1rem;
  font-weight: 500;
  width: 100%;
  height: 100%;
  justify-content: center;
  background: #e5e7eb;
}

.promo-placeholder i {
  font-size: 3rem;
  opacity: 0.5;
}

/* Carousel Indicators */
.carousel-indicators {
  position: absolute;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 0.5rem;
  z-index: 2;
}

.carousel-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: all 0.2s;
}

.carousel-dot.active {
  background: white;
  transform: scale(1.2);
}

/* Carousel Overlay for Prices/Title (Optional) */
.promo-info-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 2rem 1rem 1rem 1rem;
  background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.7));
  color: white;
  z-index: 1;
}

.promo-info-title {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.promo-info-price {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-primary);
  /* Or white to stand out */
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Products container */
/* .products-container used for grouping categories */

.category-section {
  margin-bottom: 1.5rem;
}

.category-section h2 {
  font-size: 1.3rem;
  color: var(--color-text);
  margin-bottom: 1rem;
  padding-left: 0.5rem;
  border-left: 4px solid var(--color-primary);
}

/* Horizontal Scrolling Row */
.products-row {
  display: flex;
  gap: 1rem;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 0.5rem 0.5rem 1.5rem 0.5rem;
  /* Bottom padding for shadow/scroll */
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  /* Hide scrollbar Firefox */
  -webkit-overflow-scrolling: touch;
}

.products-row::-webkit-scrollbar {
  display: none;
  /* Hide scrollbar Chrome/Safari */
}

.products-row .product-card {
  min-width: 220px;
  /* Fixed width for row items */
  max-width: 220px;
  scroll-snap-align: start;
}

/* Products with sizes need more horizontal space */
.products-row .product-card.has-sizes {
  min-width: 320px;
  max-width: 320px;
}

@media (max-width: 640px) {
  .products-row .product-card {
    min-width: 160px;
    max-width: 160px;
  }

  /* Products with sizes on mobile */
  .products-row .product-card.has-sizes {
    min-width: 240px;
    max-width: 240px;
  }
}

/* Grid for Search Results */
.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 1.5rem;
}

/* Products with sizes occupy 2 columns in grid */
.products-grid .product-card.has-sizes {
  grid-column: span 2;
}

@media (max-width: 640px) {
  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 1rem;
  }
}

/* Product card */
.product-card {
  background: white;
  border-radius: var(--border-radius);
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.product-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
}

.product-card-image {
  width: 100%;
  aspect-ratio: 1;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
  font-size: 0.85rem;
  position: relative;
  overflow: hidden;
}

/* Products with sizes get 2:1 aspect ratio (more horizontal) */
.product-card.has-sizes .product-card-image {
  aspect-ratio: 2 / 1;
}

.product-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.product-card-body {
  padding: 1rem;
}

.product-card-name {
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 0.5rem;
  font-size: 1rem;
  line-height: 1.3;
}

.product-card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.product-card-price {
  color: var(--color-primary);
  font-weight: 700;
  font-size: 1.2rem;
}

/* Price range for products with sizes */
.product-card-price-range {
  color: var(--color-primary);
  font-weight: 700;
  font-size: 1.05rem;
  white-space: nowrap;
}

/* Discount pricing styles */
.product-card-price-container {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.price-discount-wrapper {
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.discount-badge {
  background: #fbbf24;
  color: #000;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.7rem;
  font-weight: 700;
  line-height: 1;
}

.original-price {
  color: #6b7280;
  text-decoration: line-through;
  font-size: 0.8rem;
  font-weight: 500;
}

.discounted-price {
  color: var(--color-primary, #2563eb);
  font-weight: 700;
  font-size: 1.1rem;
}


.btn-add-to-modal {
  background: var(--color-primary);
  color: white;
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.btn-add-to-modal:hover {
  background: var(--primary-hover);
  transform: scale(1.1);
}

/* Maintenance State */
.maintenance-state {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #f8fafc;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 2rem;
  text-align: center;
}

.maintenance-content {
  background: white;
  padding: 3rem 2rem;
  border-radius: 16px;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  width: 100%;
}

.maintenance-icon {
  position: relative;
  width: 80px;
  height: 80px;
  margin: 0 auto 1.5rem auto;
  background: #f1f5f9;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.maintenance-icon i {
  font-size: 2.5rem;
  color: #64748b;
}

.maintenance-icon .status-badge {
  position: absolute;
  bottom: -5px;
  right: -5px;
  background: white;
  border-radius: 50%;
  padding: 2px;
}

.maintenance-icon .status-badge i {
  color: #ef4444;
  font-size: 1.5rem;
}

.maintenance-content h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 0.75rem;
}

.maintenance-content p {
  color: #64748b;
  line-height: 1.5;
  margin-bottom: 2rem;
}

.maintenance-actions .btn-primary {
  width: 100%;
  justify-content: center;
  padding: 1rem;
}

.btn-add-to-modal:active {
  transform: scale(0.95);
}

.btn-add-to-modal i {
  font-size: 1.2rem;
}

/* Favorite Button on Product Card */
.favorite-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: rgba(255, 255, 255, 0.95);
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  z-index: 10;
}

.favorite-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.favorite-btn i {
  font-size: 1.3rem;
  color: #9ca3af;
  transition: color 0.2s ease;
}

.favorite-btn.active i {
  color: #ec4899;
}

.favorite-btn:active {
  transform: scale(0.95);
}

/* Like animation */
@keyframes likeAnimation {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.3);
  }
}

.favorite-btn.animating {
  animation: likeAnimation 0.4s ease;
}

/* Scroll Animations */
.fade-in-up {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.fade-in-up.animate-in {
  opacity: 1;
  transform: translateY(0);
}

/* Staggered animation delays for sequential effect */
.fade-in-up:nth-child(1) {
  transition-delay: 0s;
}

.fade-in-up:nth-child(2) {
  transition-delay: 0.1s;
}

.fade-in-up:nth-child(3) {
  transition-delay: 0.2s;
}

.fade-in-up:nth-child(4) {
  transition-delay: 0.3s;
}

.fade-in-up:nth-child(5) {
  transition-delay: 0.4s;
}

/* For subsequent items, maintain a consistent delay */
.fade-in-up:nth-child(n+6) {
  transition-delay: 0.4s;
}

/* Cart FAB */

.cart-fab {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 1000;
}

.cart-fab-btn {
  background: var(--color-primary);
  color: white;
  border: none;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  transition: transform 0.2s;
}

.cart-fab-btn:hover {
  transform: scale(1.1);
}

.cart-icon {
  font-size: 1.5rem;
}

.cart-count {
  position: absolute;
  top: -5px;
  right: -5px;
  background: #ef4444;
  color: white;
  font-size: 0.75rem;
  font-weight: 700;
  min-width: 24px;
  height: 24px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 0.5rem;
}

/* Cart panel */
.cart-panel {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2000;
}

.cart-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
}

.cart-content {
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: 100%;
  max-width: 400px;
  background: white;
  display: flex;
  flex-direction: column;
  box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
  }

  to {
    transform: translateX(0);
  }
}

.cart-header {
  padding: 1.5rem;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.cart-header h2 {
  font-size: 1.3rem;
  color: var(--color-text);
}

.cart-close {
  background: none;
  border: none;
  font-size: 2rem;
  color: #9ca3af;
  cursor: pointer;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cart-close:hover {
  color: var(--color-text);
}

.cart-body {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

.empty-cart-message {
  text-align: center;
  color: #9ca3af;
  padding: 3rem 1rem;
}

/* Cart item */
.cart-item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 0.5rem;
  margin-bottom: 0.75rem;
}

.cart-item-image {
  width: 60px;
  height: 60px;
  background: #e5e7eb;
  border-radius: 0.5rem;
  flex-shrink: 0;
  overflow: hidden;
}

.cart-item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.cart-item-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.cart-item-name {
  font-weight: 600;
  color: var(--color-text);
  font-size: 0.95rem;
}

.cart-item-price {
  color: var(--color-primary);
  font-weight: 600;
  font-size: 0.9rem;
}

.cart-item-quantity {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.cart-item-quantity button {
  background: white;
  border: 1px solid var(--color-border);
  width: 28px;
  height: 28px;
  border-radius: 0.25rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
}

.cart-item-quantity button:hover {
  background: #f3f4f6;
}

.cart-item-quantity span {
  min-width: 30px;
  text-align: center;
  font-weight: 600;
}

.cart-item-remove {
  background: none;
  border: none;
  color: #ef4444;
  cursor: pointer;
  font-size: 0.85rem;
  padding: 0.25rem 0;
  text-decoration: underline;
}

/* Cart footer */
.cart-footer {
  padding: 1.5rem;
  border-top: 1px solid var(--color-border);
  background: white;
}

.cart-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.cart-total-amount {
  font-weight: 700;
  color: var(--color-primary);
  font-size: 1.5rem;
}

.btn-whatsapp {
  width: 100%;
  background: #25D366;
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn-whatsapp:hover {
  opacity: 0.9;
}

/* Product detail modal */
.product-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

.product-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
}

.product-modal-content {
  position: relative;
  background: white;
  border-radius: var(--border-radius);
  max-width: 500px;
  width: 100%;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: modalZoom 0.3s ease-out;
  overflow: hidden;
}

@keyframes modalZoom {
  from {
    transform: scale(0.9);
    opacity: 0;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* Modal Header (Fixed) */
.product-modal-header {
  position: sticky;
  top: 0;
  z-index: 10;
  background: white;
  border-bottom: 1px solid var(--color-border);
  padding: 1rem 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 60px;
}

.product-modal-header-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text);
  opacity: 0;
  transition: opacity 0.3s ease;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.product-modal-header.scrolled .product-modal-header-title {
  opacity: 1;
}

.product-modal-header-actions {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.product-modal-action-btn {
  background: transparent;
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1.3rem;
  color: var(--color-text);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.product-modal-action-btn:hover {
  background: #f3f4f6;
}

/* Modal Body (Scrollable) */
.product-modal-body {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.product-modal-image {
  width: 100%;
  aspect-ratio: 1;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
}

.product-modal-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Promotion modal image - 16:9 aspect ratio */
#promotionModal .product-modal-image {
  aspect-ratio: 16/9;
  width: 100%;
  max-height: none;
}

.product-modal-info {
  padding: 1.5rem;
}

.product-modal-info h2 {
  font-size: 1.5rem;
  color: var(--color-text);
  margin-bottom: 0.5rem;
}

.product-modal-price {
  color: var(--color-primary);
  font-weight: 700;
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.product-modal-description {
  color: #666;
  line-height: 1.6;
  margin-bottom: 1.5rem;
}

/* Modal Footer (Fixed) */
.product-modal-footer {
  position: sticky;
  bottom: 0;
  z-index: 10;
  background: white;
  border-top: 1px solid var(--color-border);
  padding: 1rem 1.5rem;
  display: flex;
  gap: 1rem;
  align-items: center;
}

.product-modal-quantity {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.quantity-btn {
  background: white;
  border: 2px solid var(--color-border);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  flex-shrink: 0;
}

.quantity-btn:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.quantity-value {
  font-size: 1.2rem;
  font-weight: 700;
  min-width: 30px;
  text-align: center;
}

.btn-add-to-cart {
  flex: 1;
  background: var(--color-primary);
  color: white;
  border: none;
  padding: 0.875rem 1rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn-add-to-cart:hover {
  opacity: 0.9;
}

/* ============================================
   PRODUCT MODAL - OPCIONES
   ============================================ */

.product-options-section {
  display: block;
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--color-border);
}

.product-options-section h3 {
  font-size: 1rem;
  color: var(--color-text);
  margin-bottom: 1rem;
  font-weight: 600;
}

/* Quick comments (radio buttons) */
.quick-comments-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.quick-comment-option {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
}

.quick-comment-option input[type="radio"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

.quick-comment-option label {
  cursor: pointer;
  flex: 1;
  color: var(--color-text);
}

/* Sides (checkboxes) */
.sides-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.side-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem;
  background: #f9fafb;
  border: 2px solid transparent;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: all 0.2s;
}

.side-option:hover {
  background: #f3f4f6;
}

.side-option.selected {
  border-color: var(--color-primary);
  background: #f0fdf4;
}

.side-option-left {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.side-option input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

.side-option-name {
  font-weight: 500;
  color: var(--color-text);
}

.side-option-price {
  color: var(--color-primary);
  font-weight: 600;
}

/* Ajustes al modal para opciones */
.product-modal-content {
  max-height: 95vh;
}

.product-modal-info {
  max-height: calc(95vh - 300px);
  overflow-y: auto;
}

/* Mejorar estética general del catálogo */
.catalog-header {
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.header-content {
  padding: 1.5rem 1rem;
}

.business-info h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a1a1a;
  margin-bottom: 0.25rem;
}

.business-info p {
  color: #6b7280;
  font-size: 0.9rem;
}

/* Mejorar cards de productos */
.product-card {
  transition: all 0.3s ease;
}

.product-card:active {
  transform: translateY(-2px) scale(0.98);
}

.product-card-name {
  font-size: 0.95rem;
  line-height: 1.4;
  min-height: 40px;
}

@media (max-width: 640px) {
  .product-card-name {
    font-size: 0.85rem;
    min-height: 36px;
  }

  .product-card-price {
    font-size: 1rem;
  }

  /* Mobile fix for Product/Promotion Modal */
  .product-modal-content {
    display: flex;
    flex-direction: column;
    max-height: 90vh;
    /* Optimized for mobile viewport */
    height: auto;
  }

  /* Product modal images - maintain aspect ratio */
  .product-modal-image {
    flex-shrink: 0;
    width: 100%;
    height: auto;
    /* Let aspect ratio control height */
    max-height: none;
    /* Remove max-height to allow proper aspect ratio */
  }

  /* Promotion modal images - maintain 16:9 aspect ratio */
  #promotionModal .product-modal-image {
    aspect-ratio: 16/9;
    width: 100%;
    height: auto;
    max-height: none;
    /* Critical: remove max-height to prevent distortion */
  }

  /* Modal info section - scrollable content area */
  .product-modal-info {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    /* Smooth scrolling on iOS */
    max-height: none;
    /* Let flex container control height */
    padding: 1.5rem;
    padding-bottom: 2rem;
    /* Extra bottom padding for scroll comfort */
    min-height: 0;
    /* Critical: allows flex child to shrink and scroll */
  }

  /* Ensure options sections are visible and scrollable */
  .product-options-section {
    margin-top: 1rem;
    margin-bottom: 1rem;
    display: block !important;
    /* Force display block if hidden wasn't removed correctly or overridden */
  }

  /* Handle hidden class specifically */
  .product-options-section.hidden {
    display: none !important;
  }

  /* Specific fix for Promotion Modal Options to match Product Modal behavior */
  #promotionModal .product-options-section h3 {
    font-size: 1rem;
    color: var(--color-text);
    margin-bottom: 0.75rem;
    font-weight: 600;
  }

  #promotionModal .quick-comments-list,
  #promotionModal .sides-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    width: 100%;
  }

  /* CRITICAL: FORCE VISIBILITY BY ID FOR PROMOTION SECTIONS */
  #promotionQuickCommentsSection:not(.hidden),
  #promotionSidesSection:not(.hidden) {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    height: auto !important;
    margin-top: 1rem !important;
    margin-bottom: 1rem !important;
  }

  /* Ensure quantity controls are visible */
  .product-modal-quantity {
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
  }
}

/* Empty states */
.empty-message {
  color: #9ca3af;
  text-align: center;
  padding: 3rem 1rem;
  font-style: italic;
  font-size: 0.95rem;
}

/* ============================================
   ICONOS EN CATÁLOGO
   ============================================ */

/* Carrito flotante */
.cart-icon {
  font-size: 1.5rem;
  font-style: normal;
}

/* Botones con iconos */
.btn-whatsapp i,
.btn-add-to-cart i {
  margin-right: 0.5rem;
  font-size: 1.2em;
}

.cart-header h2 i {
  margin-right: 0.5rem;
}

.cart-close i {
  font-size: 1.5rem;
}

.quantity-btn i {
  font-size: 1.2rem;
}

/* Mejorar estética general */
.product-modal-close i {
  font-size: 1.3rem;
}

/* ============================================
   CHECKOUT MODAL
   ============================================ */

.checkout-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

.checkout-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

.checkout-modal-content {
  position: relative;
  background: white;
  border-radius: 1rem;
  max-width: 500px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: modalSlideUp 0.3s ease-out;
}

@keyframes modalSlideUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.checkout-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  border-bottom: 1px solid var(--color-border);
}

.checkout-modal-header h2 {
  font-size: 1.3rem;
  color: var(--color-text);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.checkout-modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #9ca3af;
  cursor: pointer;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.5rem;
  transition: all 0.2s;
}

.checkout-modal-close:hover {
  background: #f3f4f6;
  color: var(--color-text);
}

.checkout-form {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

.checkout-form .form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.checkout-form label {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--color-text);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.checkout-form label i {
  color: var(--color-primary);
  font-size: 1.1em;
}

.checkout-form input,
.checkout-form textarea,
.checkout-form select {
  padding: 0.75rem;
  border: 1px solid var(--color-border);
  border-radius: 0.5rem;
  font-size: 1rem;
  font-family: inherit;
  transition: all 0.2s;
}

.checkout-form input:focus,
.checkout-form textarea:focus,
.checkout-form select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(37, 200, 37, 0.1);
}

.checkout-form textarea {
  resize: vertical;
  min-height: 60px;
}

.checkout-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.btn-cancel {
  flex: 1;
  background: white;
  color: var(--color-text);
  border: 1px solid var(--color-border);
  padding: 0.875rem 1.5rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-cancel:hover {
  background: #f9fafb;
}

.btn-confirm {
  flex: 2;
  background: #25D366;
  color: white;
  border: none;
  padding: 0.875rem 1.5rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.btn-confirm:hover {
  background: #20ba5a;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
}

.btn-confirm:active {
  transform: translateY(0);
}

/* Responsive */
@media (max-width: 640px) {
  .checkout-modal-content {
    max-height: 85vh;
    /* Reduced from 95vh to ensure buttons are visible */
    border-radius: 1rem;
    margin-top: auto;
    display: flex;
    flex-direction: column;
  }

  .checkout-form {
    overflow-y: auto;
    flex: 1;
    padding-bottom: 2rem;
    /* Add padding to bottom */
  }

  .checkout-actions {
    flex-direction: column-reverse;
    padding: 1rem;
    background: white;
    border-top: 1px solid var(--color-border);
    margin-top: 0;
    flex-shrink: 0;
    /* Prevent shrinking */
  }

  .checkout-actions button {
    width: 100%;
  }
}

/* ============================================
   BUSINESS STATUS BADGE
   ============================================ */

.business-status-badge {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  font-size: 0.9rem;
  font-weight: 600;
  margin-top: 0.75rem;
  width: fit-content;
}

.business-status-badge.open {
  background: #dcfce7;
  color: #16a34a;
}

.business-status-badge.closed {
  background: #fee2e2;
  color: #dc2626;
}

.business-status-badge i {
  font-size: 1.1rem;
}

/* ============================================
   CLOSED MODAL
   ============================================ */

.closed-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 4000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

.closed-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
}

.closed-modal-content {
  position: relative;
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  max-width: 400px;
  width: 100%;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: modalZoom 0.3s ease-out;
}

.closed-modal-icon {
  width: 80px;
  height: 80px;
  background: #fee2e2;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem;
}

.closed-modal-icon i {
  font-size: 2.5rem;
  color: #dc2626;
}

.closed-modal-content h2 {
  font-size: 1.5rem;
  color: var(--color-text);
  margin-bottom: 0.75rem;
}

.closed-modal-content p {
  color: #6b7280;
  line-height: 1.6;
  margin-bottom: 1rem;
}

.closed-modal-content .next-opening {
  background: #f0fdf4;
  padding: 0.75rem;
  border-radius: 0.5rem;
  color: #16a34a;
  font-size: 0.95rem;
  margin-bottom: 1.5rem;
}

.closed-modal-content .next-opening strong {
  font-weight: 700;
}

.closed-modal-content .btn-primary {
  width: 100%;
  background: var(--color-primary);
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
}

.closed-modal-content .btn-primary:hover {
  opacity: 0.9;
}

/* Redirect Modal */
.redirect-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 5000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.redirect-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);
}

.redirect-modal-content {
  position: relative;
  background: white;
  padding: 3rem 2rem;
  border-radius: 1.5rem;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
  max-width: 320px;
  width: 90%;
  z-index: 10;
  animation: slideUpFade 0.4s ease-out;
}

.redirect-spinner {
  position: relative;
  width: 80px;
  height: 80px;
  margin: 0 auto 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.redirect-spinner i {
  font-size: 2.5rem;
  color: #25D366;
  z-index: 2;
}

.redirect-spinner .spinner-ring {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 4px solid #dcfce7;
  border-top-color: #25D366;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.redirect-modal-content h2 {
  font-size: 1.25rem;
  color: #1a1a1a;
  margin-bottom: 0.5rem;
}

.redirect-modal-content p {
  color: #6b7280;
  margin-bottom: 1rem;
  line-height: 1.5;
}

.redirect-modal-content small {
  color: #9ca3af;
  font-size: 0.85rem;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes slideUpFade {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   REDIRECT MODAL STYLES (RESTORED)
   ============================================ */
.redirect-icon {
  width: 80px;
  height: 80px;
  background: #dcfce7;
  color: #22c55e;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  margin: 0 auto 1.5rem;
}

.redirect-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #22c55e;
  border-radius: 50%;
  margin: 0 auto;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/* ============================================
   CATALOG FOOTER
   ============================================ */

.catalog-footer {
  background: var(--surface-light);
  border-top: 1px solid var(--color-border);
  padding: 2rem 1rem;
  margin-top: 1rem;
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  align-items: center;
  text-align: center;
}

.footer-brand {
  display: flex;
  align-items: center;
  gap: 0rem;
}

.footer-icon {
  font-size: 1.5rem;
  color: var(--color-primary);
}

.footer-brand-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--color-text);
}

.footer-copyright p {
  color: var(--text-muted);
  font-size: 0.85rem;
  margin: 0;
}

.btn-footer-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1.2rem;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  transition: var(--transition);
}

.btn-footer-link:hover {
  background: var(--bg-light);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.btn-footer-link i {
  font-size: 1rem;
}

/* Responsive footer */
@media (min-width: 768px) {
  .footer-content {
    flex-direction: row;
    justify-content: space-between;
    text-align: left;
  }
}

/* ============================================
   CRITICAL: Visibility Control for Options
   ============================================ */

/* Ensure options sections are visible by default */
.product-options-section:not(.hidden) {
  display: block !important;
}

/* Hide only when explicitly marked */
.product-options-section.hidden {
  display: none !important;
}

/* ============================================
   SHARE MODAL
   ============================================ */

.share-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 5000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

.share-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

.share-modal-content {
  position: relative;
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  max-width: 400px;
  width: 100%;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: modalZoom 0.3s ease-out;
}

.share-modal-content h3 {
  margin: 0 0 1rem 0;
  font-size: 1.3rem;
  color: var(--color-text);
}

@media (max-width: 640px) {
  .share-modal-content {
    max-height: 90vh;
    overflow-y: auto;
  }
}

/* =========================================
   DESKTOP 3-COLUMN LAYOUT (min-width: 1024px)
   ========================================= */

/* Default hidden on mobile */
.desktop-sidebar,
.cart-panel {
  display: none;
}

/* --- DESKTOP 3-COLUMN LAYOUT (Dynamic) --- */
@media (min-width: 1024px) {

  /* HIDE Mobile Header Elements */
  .catalog-header {
    display: none !important;
  }

  /* MAIN LAYOUT CONTAINER */
  #catalogContent {
    display: flex;
    height: 100vh;
    overflow: hidden;
    background-color: #f8fafc;
    /* bg-slate-50 */
  }

  /* 1. LEFT SIDEBAR (22vw) */
  .desktop-sidebar {
    width: 22vw;
    min-width: 260px;
    height: 100%;
    background-color: #fff;
    border-right: 1px solid #e2e8f0;
    /* border-slate-200 */
    display: flex;
    flex-direction: column;
    z-index: 20;
  }

  .sidebar-header {
    padding: 1.5rem;
    /* p-6 */
    border-bottom: 1px solid #f1f5f9;
    /* border-slate-100 */
  }

  .sidebar-brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .sidebar-logo {
    width: 3rem;
    height: 3rem;
    background-color: var(--color-primary);
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    overflow: hidden;
    margin-bottom: 0;
    box-shadow: none;
    flex-shrink: 0;
  }

  .sidebar-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    aspect-ratio: 1/1;
  }

  .sidebar-business-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-text);
    margin: 0;
    line-height: 1.2;
  }

  .sidebar-info-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .sidebar-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #94a3b8;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  .sidebar-contact-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: #475569;
    line-height: 1.4;
    padding: 0.25rem 0;
  }

  /* Badge Styles for Status */
  .sidebar-contact-item.business-status {
    display: inline-flex;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.8rem;
    font-weight: 600;
    width: fit-content;
  }

  .sidebar-contact-item.business-status.open {
    background-color: #dcfce7;
    /* green-100 */
    color: #166534;
    /* green-800 */
  }

  .sidebar-contact-item.business-status.open i {
    color: #166534;
  }

  .sidebar-contact-item.business-status.closed {
    background-color: #fee2e2;
    /* red-100 */
    color: #991b1b;
    /* red-800 */
  }

  .sidebar-contact-item.business-status.closed i {
    color: #991b1b;
  }

  .sidebar-contact-item i {
    color: var(--color-primary);
    font-size: 1.1rem;
  }

  /* Sidebar Navigation */
  .sidebar-nav {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .sidebar-nav .sidebar-label {
    padding: 0 0.5rem;
    margin-bottom: 0.75rem;
  }

  .sidebar-category-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    font-size: 0.95rem;
    font-weight: 500;
    color: #475569;
    transition: all 0.2s;
    cursor: pointer;
  }

  .sidebar-category-item:hover {
    background-color: #f8fafc;
    color: var(--color-text);
  }

  .sidebar-category-item.active {
    background-color: rgba(var(--color-primary-rgb), 0.1);
    color: var(--color-primary);
  }

  /* Imperdibles Special Style */
  .sidebar-category-item.sidebar-imperdibles {
    background-color: #ffb24f;
    /* Custom Orange/Yellow */
    color: #000000;
    /* Black text */
  }

  .sidebar-category-item.sidebar-imperdibles:hover {
    opacity: 0.9;
  }

  .sidebar-category-item.sidebar-imperdibles i {
    color: #000000;
  }

  .sidebar-category-item i {
    font-size: 1.25rem;
  }

  /* Hide Global Footer on Desktop */
  .catalog-footer {
    display: none !important;
  }

  .sidebar-footer {
    padding: 1rem;
    border-top: 1px solid #f1f5f9;
    display: flex;
    flex-direction: row;
    /* Side by side */
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    margin-top: auto;
  }

  .sidebar-traego-branding {
    display: flex;
    align-items: center;
    justify-content: center;
    /* Removed width 100% so it fits with button if desired, or we can just use the items directly */
  }

  /* We will remove the text label via JS/HTML update, ensuring compact look */

  .traego-logo-img {
    height: 1.25rem;
    /* Smaller logo */
    width: auto;
    opacity: 0.8;
    transition: opacity 0.2s;
  }

  .traego-logo-img:hover {
    opacity: 1;
  }

  .btn-traego {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.4rem 0.75rem;
    /* Smaller padding */
    background-color: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
    color: #475569;
    font-size: 0.75rem;
    /* Smaller text */
    font-weight: 600;
    width: auto;
    /* Allow shrink */
    text-decoration: none;
    transition: all 0.2s;
    gap: 0.25rem;
  }

  .btn-traego:hover {
    background-color: #f1f5f9;
    border-color: #cbd5e1;
    color: #0f172a;
  }

  .btn-traego i {
    font-size: 0.85rem;
    color: var(--color-primary);
  }

  /* --- PRODUCT MODAL DESKTOP LAYOUT (2 Columns) --- */
  /* Redefine modal content for desktop */
  #productModal .product-modal-content,
  #promotionModal .product-modal-content {
    display: flex;
    flex-direction: row;
    width: 900px;
    max-width: 90%;
    height: 80vh;
    /* Fixed height for consistent layout */
    max-height: 80vh;
    overflow: hidden;
    /* Container doesn't scroll, right side does */
  }

  /* Left Column: Image */
  #productModal .product-modal-image,
  #promotionModal .product-modal-image {
    width: 45%;
    height: 100%;
    object-fit: cover;
    flex-shrink: 0;
    border-radius: 1rem 0 0 1rem;
    /* Rounded corners on left */
  }

  /* Right Column: Info & Options */
  #productModal .product-modal-info,
  #promotionModal .product-modal-info {
    width: 55%;
    height: 100%;
    overflow-y: auto;
    padding: 2rem;
    display: flex;
    flex-direction: column;
  }

  /* Ensure close button is positioned correctly relative to the modal content */
  .product-modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    z-index: 50;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  /* 2. CENTER CONTENT (Dynamic Width) */
  .catalog-center-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    background-color: #f8fafc;
    /* bg-slate-50 */
  }

  /* Sticky Header */
  .desktop-search-nav-row {
    position: sticky;
    top: 0;
    z-index: 10;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid #e2e8f0;
    /* Removed fixed height, let padding define it */
    padding: 1rem 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5rem;
  }

  /* Search Input Style from Inspiration */
  .catalog-search-container {
    flex: 1;
    max-width: 600px;
    position: relative;
    padding: 0;
    /* Override */
    background: transparent;
    /* Override */
    margin: 0;
    /* Override */
  }

  .catalog-search-bar {
    width: 100%;
    position: relative;
    padding: 0;
    /* Override */
    background: transparent;
    /* Override */
    border: none;
    /* Override */
    max-width: none;
    /* Override */
    margin: 0;
    /* Override */
    display: block;
    /* Override flex */
  }

  .catalog-search-bar input {
    width: 100%;
    padding: 0.6rem 1rem 0.6rem 2.75rem;
    background-color: #f1f5f9;
    /* bg-slate-100 */
    border: none;
    border-radius: 0.5rem;
    font-size: 0.95rem;
    color: #334155;
    transition: box-shadow 0.2s;
  }

  .catalog-search-bar input:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--color-primary);
  }

  .catalog-search-bar i {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: #94a3b8;
    margin: 0;
    /* Override */
    /* text-slate-400 */
  }

  /* Hide Mobile Nav Elements */
  .categories-nav-wrapper {
    display: none !important;
  }

  /* Main Scrollable Area */
  .catalog-main {
    flex: 1;
    overflow-y: auto;
    padding: 2rem;
    width: 100%;
    /* Force full width */
  }

  .products-container {
    width: 100%;
    max-width: none;
    margin: 0;
    padding-bottom: 1rem;
  }

  /* Product Grid override */
  .products-grid,
  .products-row {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    overflow-x: visible;
    padding: 0;
    width: 100%;
  }

  /* Force card size in desktop */
  .products-grid .product-card,
  .products-row .product-card {
    flex: 0 0 250px;
    /* Don't grow, don't shrink, fixed base */
    width: 250px;
    max-width: 250px;
    min-width: 250px;
  }

  /* Optional: Adjust for smaller screens still within desktop range if needed, 
     but user asked for max/min restriction. 
     Flexbox with wrap handles the "jump to next line" requirement automatically. */

  .category-section {
    width: 100%;
    /* Occupy full width */
    margin-bottom: 2rem;
  }

  .category-section h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--color-text);
  }

  /* 3. RIGHT SIDEBAR (25vw) - Cart */
  #cartPanel {
    width: 25vw;
    /* Slightly increased for better fit */
    min-width: 320px;
    height: 100%;

    display: flex;
    flex-direction: column;
    z-index: 30;
    /* Transition for sliding in/out */
    transition: margin-right 0.3s ease, opacity 0.3s ease;
    margin-right: -25vw;
    /* Hidden by default */
    opacity: 0;
    position: relative;
    box-shadow: -4px 0 15px rgba(0, 0, 0, 0.05);
    background-color: #fff;
    border-left: 1px solid #e2e8f0;
  }

  /* Show Cart state */
  #catalogContent.has-active-cart #cartPanel {
    margin-right: 0;
    opacity: 1;
    display: flex !important;
    /* Ensure flex layout */
  }

  /* FIX: Ensure cart content is visible and takes full height */
  #cartPanel .cart-content {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    position: relative;
    transform: none;
    box-shadow: none;
    border-radius: 0;
    background: transparent;
    padding: 0;
    visibility: visible !important;
    /* Force visible */
    opacity: 1 !important;
  }

  #cartPanel .cart-header {
    padding: 1.5rem;
    border-bottom: 1px solid #f1f5f9;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  #cartPanel .cart-body {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
    display: block !important;
    /* Force display block for standard flow */
  }

  /* Force Cart Items to be visible */
  #cartPanel .cart-item {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: #fff;
    border-bottom: 1px solid #f1f5f9;
    padding-bottom: 1rem;
    margin-bottom: 1rem;
  }

  #cartPanel .cart-item-info {
    flex: 1;
    display: block !important;
  }

  #cartPanel .cart-footer {
    padding: 1.5rem;
    border-top: 1px solid #f1f5f9;
    background: #fff;
    flex-shrink: 0;
    display: block !important;
    /* Force visible */
  }

  /* Hide search bar in sidebar if present */
  .desktop-sidebar .catalog-search-container {
    display: none;
  }

  .cart-overlay {
    display: none !important;
  }

  .cart-close {
    display: none !important;
  }

  .cart-header {
    padding: 1.5rem;
    border-bottom: 1px solid #f1f5f9;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .cart-header h2 {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--color-text);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .cart-badge-desktop {
    background-color: rgba(var(--color-primary-rgb), 0.1);
    color: var(--color-primary);
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
  }

  .cart-body {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .cart-item {
    padding: 0.75rem;
    background-color: #f8fafc;
    border-radius: 0.5rem;
    border: 1px solid transparent;
    /* default */
    margin-bottom: 0;
  }

  .cart-item-image {
    width: 4rem;
    /* w-16 */
    height: 4rem;
    /* h-16 */
    border-radius: 0.25rem;
  }

  .cart-footer {
    padding: 1.5rem;
    background-color: #f8fafc;
    border-top: 1px solid #e2e8f0;
  }

  .cart-total-amount {
    font-size: 1.25rem;
    font-weight: 700;
  }

  .btn-whatsapp {
    width: 100%;
    padding: 1rem;
    border-radius: 0.75rem;
    font-weight: 700;
    justify-content: center;
    box-shadow: 0 4px 6px -1px rgba(37, 211, 102, 0.2);
  }

  /* Hide FAB on Desktop */
  #cartFab {
    display: none !important;
  }

}

/* End Desktop Media Query */


/* --- MOBILE SAFETY (max-width: 1023px) --- */
@media (max-width: 1023.98px) {
  #desktopSidebar {
    display: none !important;
  }

  .desktop-search-nav-row {
    display: none;
    /* Or fallback to block if we want to reuse it? 
                     Actually mobile index.html still has the old structure inside? 
                     No, we wrapped it. We need to handle mobile view of the search/nav row 
                     which is inside .desktop-search-nav-row in HTML now.
                  */
    /* Wait, if I hide .desktop-search-nav-row on mobile, mobile loses search/nav?
        Check HTML structure again. */
    display: block;
    /* It wraps standard mobile elements too */
  }

  /* On mobile, we want standard block layout for that row */
  .categories-nav-wrapper {
    display: block;
  }

  .nav-arrow {
    display: none;
  }
}

/* ============================================
   DESKTOP MODAL REDESIGN (min-width: 1024px)
   ============================================ */
@media (min-width: 1024px) {

  /* Use ID selector for higher specificity to override any default class styles */
  #productModal,
  #promotionModal {
    /* Ensure the overlay itself is flex centering (JS sets this to flex, which is correct) */
    align-items: center;
    justify-content: center;
    padding: 0;
  }

  #productModal .product-modal-content,
  #promotionModal .product-modal-content {
    width: 900px;
    max-width: 90%;
    height: 600px;
    max-height: 85vh;
    display: grid;
    grid-template-columns: 45% 1fr;
    grid-template-rows: auto 1fr auto;
    grid-template-areas:
      "header header"
      "image info"
      "image footer";
    overflow: hidden;
    /* Main container doesn't scroll, inner areas do */
    padding: 0;
    gap: 0;
    background: white;
    border-radius: 1rem;
    position: relative;
    /* Ensure no flex properties interfere */
    flex-direction: row;
  }

  /* Reset flex behavior from mobile/default */
  #productModal .product-modal-body,
  #promotionModal .product-modal-body {
    display: contents;
    /* Unwrap the body container to let children participate in the grid */
  }

  /* 1. HEADER (Top Full Width) */
  #productModal .product-modal-header,
  #promotionModal .product-modal-header {
    grid-area: header;
    position: static;
    /* Remove sticky */
    border-bottom: 1px solid var(--color-border);
    padding: 1rem 1.5rem;
    background: white;
    z-index: 20;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* 2. IMAGE (Left Column) */
  #productModal .product-modal-image,
  #promotionModal .product-modal-image {
    grid-area: image;
    height: 100%;
    width: 100%;
    aspect-ratio: auto;
    /* Allow flexible aspect ratio to fill area */
    background: #f8fafc;
    border-right: 1px solid var(--color-border);
    margin: 0;
    padding: 0;
    max-height: none;
    /* Override default max-height */
  }

  #productModal .product-modal-image img,
  #promotionModal .product-modal-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* 3. INFO (Right Column - Top Part) */
  #productModal .product-modal-info,
  #promotionModal .product-modal-info {
    grid-area: info;
    overflow-y: auto;
    /* Independent scrolling for info */
    padding: 1.5rem 2rem;
    max-height: none;
    /* Reset limitation */
    width: 100%;
    box-sizing: border-box;
  }

  /* 4. FOOTER (Right Column - Bottom Part) */
  #productModal .product-modal-footer,
  #promotionModal .product-modal-footer {
    grid-area: footer;
    position: static;
    /* Remove sticky */
    border-top: 1px solid var(--color-border);
    padding: 1rem 2rem;
    background: white;
    z-index: 20;
    width: 100%;
    box-sizing: border-box;
  }

  /* Adjustments for content inside Info area */
  .product-modal-name {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }

  .product-modal-price {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    color: var(--color-primary);
    font-weight: 700;
  }

  .product-modal-description {
    font-size: 0.95rem;
    line-height: 1.6;
    color: #4b5563;
  }

  /* Ensure Size Selector and Options look good in the right column */
  #sizeSelectorContainer {
    margin-top: 1.5rem;
  }

  .product-options-section {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--color-border);
  }

  /* Adjust Footer buttons layout if needed */
  .product-modal-quantity {
    margin-right: 1rem;
  }
}