<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Cat√°logo SaaS</title>
  <link rel="stylesheet" href="/src/styles/global.css">
  <link rel="stylesheet" href="./dashboard.css">
</head>

<body>
  <!-- Dashboard Layout Container -->
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="dashboard-sidebar">
      <!-- Logo Section -->
      <div class="sidebar-logo">
        <div class="logo-icon">
          <i class="ri-store-2-line"></i>
        </div>
        <div class="logo-text">
          <h2>Mi Cat√°logo</h2>
          <p id="businessBranchName" class="branch-name">Panel de control</p>
        </div>
      </div>

      <!-- Navigation Menu -->
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-section="dashboard">
          <i class="ri-dashboard-line"></i>
          <span>Dashboard</span>
        </a>
        <div class="nav-section-divider">
          <span>GESTI√ìN</span>
        </div>
        <a href="#" class="nav-item" data-section="business">
          <i class="ri-building-line"></i>
          <span>Mi Negocio</span>
        </a>
        <a href="#" class="nav-item" data-section="categories">
          <i class="ri-folder-line"></i>
          <span>Categor√≠as</span>
        </a>
        <a href="#" class="nav-item" data-section="products">
          <i class="ri-shopping-bag-line"></i>
          <span>Productos</span>
        </a>
        <a href="#" class="nav-item" data-section="promotions">
          <i class="ri-price-tag-3-line"></i>
          <span>Promociones</span>
        </a>
        <a href="#" class="nav-item" data-section="whatsapp">
          <i class="ri-whatsapp-line"></i>
          <span>WhatsApp</span>
        </a>
      </nav>

      <!-- User Section -->
      <div class="sidebar-user">
        <div class="user-info">
          <div class="user-avatar">
            <i class="ri-user-line"></i>
          </div>
          <div class="user-details">
            <span id="userEmail" class="user-name"></span>
            <span class="user-role">Propietario</span>
          </div>
        </div>
        <button id="logoutBtn" class="btn-logout">
          <i class="ri-logout-box-line"></i>
        </button>
      </div>
    </aside>

    <!-- Main Content Area -->
    <div class="dashboard-content">
      <!-- Top Header Bar -->
      <header class="dashboard-header">
        <div class="header-content">
          <h1 id="pageTitle">Dashboard</h1>
          <div class="header-actions">
            <button id="editBusinessBtn" class="btn-header-action" style="display: none;">
              <i class="ri-edit-line"></i>
              <span>Editar Negocio</span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="dashboard-main">

        <!-- Loading Modal -->
        <div id="loadingState" class="loading-modal">
          <div class="loading-modal-content">
            <div class="loading-spinner-container">
              <div class="loading-logo" id="dashboardLoadingLogo">
                <i class="ri-store-2-line"></i>
              </div>
              <div class="loading-spinner-ring"></div>
            </div>
            <h2>Cargando panel</h2>
            <p>Por favor espera un momento...</p>
          </div>
        </div>

        <!-- No business state (primer uso) - NUEVO ONBOARDING -->
        <div id="noBusinessState" class="no-business-state" style="display: none;">
          <div class="onboarding-wizard">

            <!-- Progress indicator -->
            <div class="wizard-progress">
              <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <span>Negocio</span>
              </div>
              <div class="progress-line"></div>
              <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <span>Categor√≠as</span>
              </div>
              <div class="progress-line"></div>
              <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <span>Producto</span>
              </div>
              <div class="progress-line"></div>
              <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <span>Listo</span>
              </div>
            </div>

            <!-- Step 1: Business -->
            <div class="wizard-step" id="wizard-step-1">
              <div class="wizard-header">
                <i class="ri-store-2-line wizard-icon"></i>
                <h2>Informaci√≥n de tu negocio</h2>
                <p>Completa los datos b√°sicos para comenzar</p>
              </div>

              <form class="wizard-form" id="wizardBusinessForm">
                <!-- Logo Upload -->
                <div class="form-group">
                  <label>Logo del negocio (opcional)</label>
                  <div class="image-upload-container">
                    <div class="image-preview" id="wiz-logo-preview">
                      <i class="ri-image-line"></i>
                      <p>Click para seleccionar logo</p>
                      <small>JPG, PNG o WEBP (m√°x. 2MB)</small>
                    </div>
                    <input type="file" id="wiz-logo-input" accept="image/jpeg,image/jpg,image/png,image/webp"
                      style="display: none;">
                    <div class="image-upload-actions" id="wiz-logo-actions" style="display: none;">
                      <button type="button" class="btn-secondary-small" id="wiz-change-logo">
                        <i class="ri-image-edit-line"></i> Cambiar logo
                      </button>
                      <button type="button" class="btn-secondary-small danger" id="wiz-remove-logo">
                        <i class="ri-delete-bin-line"></i> Eliminar
                      </button>
                    </div>
                    <div class="image-upload-progress" id="wiz-logo-progress" style="display: none;">
                      <div class="progress-bar">
                        <div class="progress-fill"></div>
                      </div>
                      <p>Subiendo logo...</p>
                    </div>
                  </div>
                  <input type="hidden" id="wiz-logo-url-hidden">
                </div>

                <div class="form-group">
                  <label for="wiz-business-name">Nombre del negocio *</label>
                  <input type="text" id="wiz-business-name" placeholder="Ej: Burger Master" required>
                </div>

                <div class="form-group">
                  <label for="wiz-whatsapp">WhatsApp *</label>
                  <input type="tel" id="wiz-whatsapp" placeholder="+573001234567" required>
                  <small>Incluye c√≥digo de pa√≠s (+57 para Colombia)</small>
                </div>

                <div class="form-group">
                  <label for="wiz-description">Descripci√≥n</label>
                  <textarea id="wiz-description" rows="2" placeholder="Describe tu negocio..."></textarea>
                </div>

                <button type="submit" class="btn-primary btn-block">
                  Continuar <i class="ri-arrow-right-line"></i>
                </button>
              </form>
            </div>

            <!-- Step 2: Categories -->
            <div class="wizard-step" id="wizard-step-2" style="display: none;">
              <div class="wizard-header">
                <i class="ri-folder-line wizard-icon"></i>
                <h2>Agrega categor√≠as</h2>
                <p>Organiza tus productos (opcional)</p>
              </div>

              <div class="wizard-content">
                <div class="category-input-group">
                  <input type="text" id="wiz-category-input" placeholder="Ej: Hamburguesas, Bebidas...">
                  <button type="button" id="wiz-add-category" class="btn-primary">
                    <i class="ri-add-line"></i>
                  </button>
                </div>

                <div id="wiz-categories-display" class="categories-display">
                  <!-- Se llenar√°n con JS -->
                </div>

                <div class="wizard-actions">
                  <button type="button" id="wiz-skip-categories" class="btn-secondary">
                    Omitir
                  </button>
                  <button type="button" id="wiz-continue-categories" class="btn-primary">
                    Continuar <i class="ri-arrow-right-line"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Step 3: Product -->
            <div class="wizard-step" id="wizard-step-3" style="display: none;">
              <div class="wizard-header">
                <i class="ri-shopping-bag-line wizard-icon"></i>
                <h2>Primer producto</h2>
                <p>Agrega tu primer producto (opcional)</p>
              </div>

              <div class="wizard-content">
                <form class="wizard-form" id="wizardProductForm">
                  <div class="form-group">
                    <label for="wiz-product-name">Nombre del producto</label>
                    <input type="text" id="wiz-product-name" placeholder="Ej: Hamburguesa Cl√°sica">
                  </div>

                  <div class="form-group">
                    <label for="wiz-product-price">Precio</label>
                    <input type="number" id="wiz-product-price" step="0.01" min="0" placeholder="0.00">
                  </div>

                  <div class="form-group" id="wiz-product-category-group" style="display: none;">
                    <label for="wiz-product-category">Categor√≠a</label>
                    <select id="wiz-product-category">
                      <option value="">Sin categor√≠a</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="wiz-product-description">Descripci√≥n</label>
                    <textarea id="wiz-product-description" rows="2" placeholder="Describe el producto..."></textarea>
                  </div>
                </form>

                <div class="wizard-actions">
                  <button type="button" id="wiz-skip-product" class="btn-secondary">
                    Omitir
                  </button>
                  <button type="button" id="wiz-continue-product" class="btn-primary">
                    Finalizar <i class="ri-check-line"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Step 4: Success -->
            <div class="wizard-step" id="wizard-step-4" style="display: none;">
              <div class="wizard-header success">
                <i class="ri-checkbox-circle-line wizard-icon"></i>
                <h2>¬°Todo listo! üéâ</h2>
                <p>Tu negocio est√° configurado</p>
              </div>

              <div class="wizard-content">
                <div class="success-summary">
                  <div class="summary-item">
                    <i class="ri-store-2-line"></i>
                    <div>
                      <strong>Negocio creado</strong>
                      <p id="summary-business-name">-</p>
                    </div>
                  </div>
                  <div class="summary-item" id="summary-categories-box" style="display: none;">
                    <i class="ri-folder-line"></i>
                    <div>
                      <strong>Categor√≠as</strong>
                      <p id="summary-categories-text">-</p>
                    </div>
                  </div>
                  <div class="summary-item" id="summary-product-box" style="display: none;">
                    <i class="ri-shopping-bag-line"></i>
                    <div>
                      <strong>Producto</strong>
                      <p id="summary-product-text">-</p>
                    </div>
                  </div>
                </div>

                <button type="button" id="wiz-finish" class="btn-primary btn-block">
                  Ir al Dashboard <i class="ri-arrow-right-line"></i>
                </button>
              </div>
            </div>

          </div>
        </div>

        <!-- Business exists state -->
        <div id="businessExistsState" class="business-state" style="display: none;">

          <!-- Section: Dashboard (Default) -->
          <div id="section-dashboard" class="dashboard-section active">
            <div class="stats-grid">
              <!-- Total Categor√≠as Card -->
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
                  <i class="ri-folder-line"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Total Categor√≠as</div>
                  <div class="stat-value" id="statTotalCategories">0</div>
                </div>
              </div>

              <!-- Total Productos Card -->
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(37, 200, 37, 0.1); color: var(--color-primary);">
                  <i class="ri-shopping-bag-line"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Total Productos</div>
                  <div class="stat-value" id="statTotalProducts">0</div>
                </div>
              </div>

              <!-- Visitas al Cat√°logo Card -->
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                  <i class="ri-eye-line"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Visitas al Cat√°logo</div>
                  <div class="stat-value" id="statCatalogVisits">0</div>
                </div>
              </div>

              <!-- Producto M√°s Visto Card -->
              <div class="stat-card">
                <div class="stat-icon" style="background: rgba(236, 72, 153, 0.1); color: #ec4899;">
                  <i class="ri-star-line"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Producto M√°s Visto</div>
                  <div class="stat-value-small" id="statMostViewedProduct">-</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Section: Mi Negocio -->
          <div id="section-business" class="dashboard-section" style="display: none;">
            <section class="card">
              <div class="card-header">
                <h2><i class="ri-building-line"></i> Mi Negocio</h2>
              </div>
              <div class="card-content">
                <div class="business-info">
                  <!-- Logo Section -->
                  <div class="logo-display-container"
                    style="display: flex; flex-direction: column; align-items: center; margin-bottom: 2rem;">
                    <div class="image-preview" id="business-logo-display"
                      style="width: 150px; height: 150px; margin-bottom: 1rem; border-radius: 50%; overflow: hidden; background: #f3f4f6; display: flex; align-items: center; justify-content: center; border: 2px solid #e5e7eb; cursor: pointer;">
                      <i class="ri-store-2-line" style="font-size: 3rem; color: #9ca3af;"></i>
                    </div>
                    <input type="file" id="business-logo-input" accept="image/jpeg,image/jpg,image/png,image/webp"
                      style="display: none;">
                    <button type="button" id="changeBusinessLogoBtn" class="btn-secondary-small">
                      <i class="ri-image-edit-line"></i> Cambiar Logo
                    </button>
                    <div id="logo-upload-progress" style="display: none; width: 150px; margin-top: 0.5rem;">
                      <div class="progress-bar"
                        style="height: 4px; background: #eee; border-radius: 2px; overflow: hidden;">
                        <div class="progress-fill" style="height: 100%; background: var(--primary-color); width: 0%;">
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="info-row">
                    <span class="label"><i class="ri-store-line"></i> Nombre:</span>
                    <span id="businessName" class="value">-</span>
                  </div>
                  <div class="info-row">
                    <span class="label"><i class="ri-whatsapp-line"></i> WhatsApp:</span>
                    <span id="businessWhatsapp" class="value">-</span>
                  </div>
                  <div class="info-row">
                    <span class="label"><i class="ri-link"></i> Enlace del cat√°logo:</span>
                    <div class="catalog-link">
                      <a id="catalogLink" href="#" target="_blank" class="link">-</a>
                      <button id="copyLinkBtn" class="btn-copy">
                        <i class="ri-file-copy-line"></i> Copiar
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Payment Methods Section -->
            <section class="card" style="margin-top: 1.5rem;">
              <div class="card-header">
                <h2><i class="ri-bank-card-line"></i> M√©todos de Pago</h2>
                <button id="addPaymentMethodBtn" class="btn-primary-small">
                  <i class="ri-add-line"></i> Agregar
                </button>
              </div>
              <div class="card-content">
                <p style="color: #6b7280; font-size: 0.9rem; margin-bottom: 1rem;">
                  Configura los m√©todos de pago que tus clientes podr√°n seleccionar al hacer un pedido.
                </p>
                <div id="paymentMethodsList" class="payment-methods-list">
                  <p class="empty-message">No hay m√©todos de pago configurados</p>
                </div>
              </div>

            </section>

            <!-- Business Hours Section -->
            <section class="card" style="margin-top: 1.5rem;">
              <div class="card-header">
                <h2><i class="ri-time-line"></i> Horarios de Servicio</h2>
                <button id="saveBusinessHoursBtn" class="btn-primary-small">
                  <i class="ri-save-line"></i> Guardar Horarios
                </button>
              </div>
              <div class="card-content">
                <p style="color: #6b7280; font-size: 0.9rem; margin-bottom: 1.5rem;">
                  Configura los horarios en que tu negocio est√° abierto. Los clientes solo podr√°n hacer pedidos durante
                  estos horarios.
                </p>
                <div id="businessHoursGrid" class="business-hours-grid">
                  <!-- Se llenar√° din√°micamente con JavaScript -->
                </div>
              </div>
            </section>
          </div>

          <!-- Section: Categor√≠as -->
          <div id="section-categories" class="dashboard-section" style="display: none;">
            <section class="card">
              <div class="card-header">
                <h2><i class="ri-folder-line"></i> Categor√≠as</h2>
                <button id="addCategoryBtn" class="btn-primary-small">
                  <i class="ri-add-line"></i> Agregar
                </button>
              </div>
              <div class="card-content">
                <!-- Search Bar -->
                <div class="search-bar-container">
                  <div class="search-bar">
                    <i class="ri-search-line"></i>
                    <input type="text" id="searchCategoriesInput" placeholder="Buscar categor√≠as..." />
                    <button id="clearCategoriesSearch" class="search-clear" style="display: none;">
                      <i class="ri-close-line"></i>
                    </button>
                  </div>
                </div>
                <div id="categoriesList" class="categories-list">
                  <p class="empty-message">No hay categor√≠as a√∫n</p>
                </div>
              </div>
            </section>
          </div>

          <!-- Section: Productos -->
          <div id="section-products" class="dashboard-section" style="display: none;">
            <section class="card">
              <div class="card-header">
                <h2><i class="ri-shopping-bag-line"></i> Productos</h2>
                <button id="addProductBtn" class="btn-primary-small">
                  <i class="ri-add-line"></i> Agregar
                </button>
              </div>
              <div class="card-content">
                <!-- Search Bar -->
                <div class="search-bar-container">
                  <div class="search-bar">
                    <i class="ri-search-line"></i>
                    <input type="text" id="searchProductsInput" placeholder="Buscar productos..." />
                    <button id="clearProductsSearch" class="search-clear" style="display: none;">
                      <i class="ri-close-line"></i>
                    </button>
                  </div>
                </div>
                <div id="productsList" class="products-list">
                  <p class="empty-message">No hay productos a√∫n</p>
                </div>
              </div>
            </section>
          </div>

          <!-- Section: Promociones -->
          <div id="section-promotions" class="dashboard-section" style="display: none;">
            <section class="card">
              <div class="card-header">
                <h2><i class="ri-price-tag-3-line"></i> Promociones y Combos</h2>
                <button id="addPromotionBtn" class="btn-primary-small">
                  <i class="ri-add-line"></i> Agregar
                </button>
              </div>
              <div class="card-content">
                <p style="color: #6b7280; font-size: 0.9rem; margin-bottom: 1.5rem;">
                  Crea banners promocionales que aparecer√°n en la parte superior de tu cat√°logo.
                </p>
                <div id="promotionsList" class="promotions-list">
                  <p class="empty-message">No hay promociones activas</p>
                </div>
              </div>
            </section>
          </div>


          <!-- Section: WhatsApp -->
          <div id="section-whatsapp" class="dashboard-section" style="display: none;">
            <section class="card">
              <div class="card-header">
                <h2><i class="ri-whatsapp-line"></i> Mensaje de WhatsApp</h2>
              </div>
              <div class="card-content">
                <div class="whatsapp-template-editor">
                  <div class="template-help">
                    <p><strong>Personaliza el mensaje que se enviar√° por WhatsApp</strong></p>
                    <p class="help-text">Usa los tokens para insertar informaci√≥n din√°mica del pedido:</p>
                  </div>

                  <div class="tokens-grid">
                    <button class="token-chip" data-token="{productos}" title="Lista de productos del pedido">
                      <i class="ri-shopping-basket-line"></i> {productos}
                    </button>
                    <button class="token-chip" data-token="{total}" title="Total del pedido">
                      <i class="ri-money-dollar-circle-line"></i> {total}
                    </button>
                    <button class="token-chip" data-token="{nombre}" title="Nombre del cliente">
                      <i class="ri-user-line"></i> {nombre}
                    </button>
                    <button class="token-chip" data-token="{direccion}" title="Direcci√≥n de entrega">
                      <i class="ri-map-pin-line"></i> {direccion}
                    </button>
                    <button class="token-chip" data-token="{telefono}" title="Tel√©fono del cliente">
                      <i class="ri-phone-line"></i> {telefono}
                    </button>
                    <button class="token-chip" data-token="{barrio}" title="Barrio">
                      <i class="ri-map-pin-2-line"></i> {barrio}
                    </button>
                    <button class="token-chip" data-token="{metodo_pago}" title="M√©todo de pago">
                      <i class="ri-bank-card-line"></i> {metodo_pago}
                    </button>
                  </div>

                  <div class="form-group" style="margin-top: 1.5rem;">
                    <label for="whatsappTemplateInput">
                      <i class="ri-message-3-line"></i> Plantilla del mensaje
                    </label>

                    <!-- Editor Toolbar -->
                    <div class="editor-toolbar">
                      <div class="toolbar-group">
                        <button type="button" class="toolbar-btn" data-format="bold" title="Negrita (*texto*)"><i
                            class="ri-bold"></i></button>
                        <button type="button" class="toolbar-btn" data-format="italic" title="Cursiva (_texto_)"><i
                            class="ri-italic"></i></button>
                        <button type="button" class="toolbar-btn" data-format="monospace"
                          title="Monoespacio (```texto```)"><i class="ri-code-view"></i></button>
                      </div>
                      <div class="toolbar-group">
                        <div class="emoji-dropdown">
                          <button type="button" class="toolbar-btn" id="toggleEmojiBtn" title="Insertar Emoji"><i
                              class="ri-emotion-line"></i></button>
                          <div id="emojiPicker" class="emoji-picker" style="display:none;">
                            <div class="emoji-tabs">
                              <button type="button" class="emoji-tab active" data-category="faces">üòä</button>
                              <button type="button" class="emoji-tab" data-category="food">üçî</button>
                              <button type="button" class="emoji-tab" data-category="objects">üí°</button>
                              <button type="button" class="emoji-tab" data-category="symbols">‚úÖ</button>
                            </div>
                            <div class="emoji-grid" id="emojiGrid">
                              <!-- Filled by JS -->
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <textarea id="whatsappTemplateInput" class="whatsapp-template-textarea" rows="10"
                      placeholder="Escribe tu mensaje aqu√≠ y haz clic en los tokens para insertarlos..."></textarea>
                    <small>Haz clic en los tokens de arriba para insertarlos en la plantilla</small>
                  </div>

                  <div class="template-actions">
                    <button id="previewTemplateBtn" class="btn-secondary">
                      <i class="ri-eye-line"></i> Vista previa
                    </button>
                    <button id="saveTemplateBtn" class="btn-primary">
                      <i class="ri-save-line"></i> Guardar plantilla
                    </button>
                  </div>

                  <div id="templatePreview" class="template-preview" style="display: none;">
                    <h4><i class="ri-file-text-line"></i> Vista previa con datos de ejemplo:</h4>
                    <div class="preview-box"></div>
                  </div>
                </div>
              </div>
            </section>
          </div>

        </div>

      </main>
    </div>
  </div>

  <!-- Modal para crear/editar negocio -->
  <div id="businessModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="businessModalTitle">Crear Negocio</h3>
        <button class="modal-close" id="closeBusinessModal">&times;</button>
      </div>
      <form id="businessForm" class="modal-form">
        <div class="form-group">
          <label for="businessNameInput">Nombre del negocio *</label>
          <input type="text" id="businessNameInput" required>
        </div>
        <div class="form-group">
          <label for="businessSlugInput">Slug (URL √∫nica) *</label>
          <input type="text" id="businessSlugInput" required>
          <small>Ejemplo: mi-negocio</small>
        </div>
        <div class="form-group">
          <label for="businessWhatsappInput">N√∫mero de WhatsApp *</label>
          <input type="tel" id="businessWhatsappInput" placeholder="3001234567" required>
          <small>Sin +57, ej: 3001234567</small>
        </div>
        <div class="form-group">
          <label for="businessDescriptionInput">Descripci√≥n</label>
          <textarea id="businessDescriptionInput" rows="3"></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelBusinessBtn">Cancelar</button>
          <button type="submit" class="btn-primary" id="saveBusinessBtn">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para crear/editar producto -->
  <div id="productModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="productModalTitle">Nuevo Producto</h3>
        <button class="modal-close" id="closeProductModal">&times;</button>
      </div>
      <form id="productForm" class="modal-form">

        <!-- Image Upload Section -->
        <div class="form-group">
          <label>Imagen del producto</label>
          <div class="image-upload-container">
            <div class="image-preview" id="productImagePreview">
              <i class="ri-image-line"></i>
              <p>Click para seleccionar imagen</p>
              <small>JPG, PNG o WEBP (m√°x. 5MB)</small>
            </div>
            <input type="file" id="productImageInput" accept="image/jpeg,image/jpg,image/png,image/webp"
              style="display: none;">
            <div class="image-upload-actions" id="imageUploadActions" style="display: none;">
              <button type="button" class="btn-secondary-small" id="changeImageBtn">
                <i class="ri-image-edit-line"></i> Cambiar imagen
              </button>
              <button type="button" class="btn-secondary-small danger" id="removeImageBtn">
                <i class="ri-delete-bin-line"></i> Eliminar
              </button>
            </div>
            <div class="image-upload-progress" id="imageUploadProgress" style="display: none;">
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
              <p>Subiendo imagen...</p>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="productNameInput">Nombre del producto *</label>
          <input type="text" id="productNameInput" required>
        </div>

        <div class="form-group">
          <label for="productPriceInput">Precio *</label>
          <input type="number" id="productPriceInput" step="0.01" min="0" required>
        </div>

        <div class="form-group">
          <label for="productCategoryInput">Categor√≠a</label>
          <select id="productCategoryInput">
            <option value="">Sin categor√≠a</option>
          </select>
        </div>

        <div class="form-group">
          <label for="productDescriptionInput">Descripci√≥n</label>
          <textarea id="productDescriptionInput" rows="3"></textarea>
        </div>

        <!-- Campo oculto para guardar la URL de la imagen -->
        <input type="hidden" id="productImageUrlHidden">

        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelProductBtn">Cancelar</button>
          <button type="submit" class="btn-primary" id="saveProductBtn">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para crear/editar categor√≠a -->
  <div id="categoryModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="categoryModalTitle">Nueva Categor√≠a</h3>
        <button class="modal-close" id="closeCategoryModal">&times;</button>
      </div>
      <form id="categoryForm" class="modal-form">
        <div class="form-group">
          <label for="categoryNameInput">Nombre de la categor√≠a *</label>
          <input type="text" id="categoryNameInput" required>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelCategoryBtn">Cancelar</button>
          <button type="submit" class="btn-primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para crear/editar producto -->
  <div id="productModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="productModalTitle">Nuevo Producto</h3>
        <button class="modal-close" id="closeProductModal">&times;</button>
      </div>
      <form id="productForm" class="modal-form">

        <!-- Image Upload Section -->
        <div class="form-group">
          <label>Imagen del producto</label>
          <div class="image-upload-container">
            <div class="image-preview" id="productImagePreview">
              <i class="ri-image-line"></i>
              <p>Click para seleccionar imagen</p>
              <small>JPG, PNG o WEBP (m√°x. 5MB)</small>
            </div>
            <input type="file" id="productImageInput" accept="image/jpeg,image/jpg,image/png,image/webp"
              style="display: none;">
            <div class="image-upload-actions" id="imageUploadActions" style="display: none;">
              <button type="button" class="btn-secondary-small" id="changeImageBtn">
                <i class="ri-image-edit-line"></i> Cambiar imagen
              </button>
              <button type="button" class="btn-secondary-small danger" id="removeImageBtn">
                <i class="ri-delete-bin-line"></i> Eliminar
              </button>
            </div>
            <div class="image-upload-progress" id="imageUploadProgress" style="display: none;">
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
              <p>Subiendo imagen...</p>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="productNameInput">Nombre del producto *</label>
          <input type="text" id="productNameInput" required>
        </div>

        <div class="form-group">
          <label for="productPriceInput">Precio *</label>
          <input type="number" id="productPriceInput" step="0.01" min="0" required>
        </div>

        <div class="form-group">
          <label for="productCategoryInput">Categor√≠a</label>
          <select id="productCategoryInput">
            <option value="">Sin categor√≠a</option>
          </select>
        </div>

        <div class="form-group">
          <label for="productDescriptionInput">Descripci√≥n</label>
          <textarea id="productDescriptionInput" rows="3"></textarea>
        </div>

        <!-- Campo oculto para guardar la URL de la imagen -->
        <input type="hidden" id="productImageUrlHidden">

        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelProductBtn">Cancelar</button>
          <button type="submit" class="btn-primary" id="saveProductBtn">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para gestionar opciones del producto -->
  <div id="productOptionsModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h3 id="productOptionsModalTitle">Opciones del Producto</h3>
        <button class="modal-close" id="closeProductOptionsModal">&times;</button>
      </div>
      <div class="modal-body" style="padding: 1.5rem;">

        <div class="product-options-info"
          style="margin-bottom: 1.5rem; padding: 1rem; background: #f9fafb; border-radius: 0.5rem;">
          <h4 id="optionsProductName" style="font-size: 1.1rem; margin-bottom: 0.5rem;"></h4>
          <p style="color: #666; font-size: 0.9rem;">Configura comentarios r√°pidos y acompa√±antes para este producto</p>
        </div>

        <!-- Quick Comments Section -->
        <div class="options-section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h4 style="font-size: 1rem; font-weight: 600;">Comentarios R√°pidos</h4>
            <button class="btn-primary-small" id="addQuickCommentBtn">+ Agregar</button>
          </div>
          <div id="quickCommentsListDashboard" class="options-list">
            <p class="empty-message" style="padding: 1rem; text-align: center; color: #9ca3af; font-size: 0.9rem;">
              No hay comentarios r√°pidos
            </p>
          </div>
        </div>

        <!-- Sides Section -->
        <div class="options-section" style="margin-top: 2rem;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h4 style="font-size: 1rem; font-weight: 600;">Acompa√±antes</h4>
            <button class="btn-primary-small" id="addSideBtn">+ Agregar</button>
          </div>
          <div id="sidesListDashboard" class="options-list">
            <p class="empty-message" style="padding: 1rem; text-align: center; color: #9ca3af; font-size: 0.9rem;">
              No hay acompa√±antes
            </p>
          </div>
        </div>

      </div>
      <div style="padding: 1.5rem; border-top: 1px solid var(--color-border); display: flex; justify-content: center;">
        <button class="btn-primary" id="closeProductOptionsBtn"
          style="width: 100%; text-align: center; justify-content: center;">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Modal para crear/editar opci√≥n -->
  <div id="optionModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="optionModalTitle">Nueva Opci√≥n</h3>
        <button class="modal-close" id="closeOptionModal">&times;</button>
      </div>
      <form id="optionForm" class="modal-form">
        <div class="form-group">
          <label for="optionNameInput">Nombre *</label>
          <input type="text" id="optionNameInput" required>
        </div>
        <div class="form-group" id="optionPriceGroup">
          <label for="optionPriceInput">Precio adicional</label>
          <input type="number" id="optionPriceInput" step="0.01" min="0" value="0">
          <small>Dejar en 0 si no tiene costo adicional</small>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelOptionBtn">Cancelar</button>
          <button type="submit" class="btn-primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para crear/editar m√©todo de pago -->
  <div id="paymentMethodModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="paymentMethodModalTitle">Nuevo M√©todo de Pago</h3>
        <button class="modal-close" id="closePaymentMethodModal">&times;</button>
      </div>
      <form id="paymentMethodForm" class="modal-form">
        <div class="form-group">
          <label for="paymentMethodNameInput">Nombre del m√©todo de pago *</label>
          <input type="text" id="paymentMethodNameInput" placeholder="Ej: Efectivo, Tarjeta, Transferencia" required>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelPaymentMethodBtn">Cancelar</button>
          <button type="submit" class="btn-primary" id="savePaymentMethodBtn">Guardar</button>
        </div>
      </form>
    </div>
  </div>



  <script type="module" src="./dashboard.js"></script>

  <!-- Modal para crear/editar promoci√≥n -->
  <div id="promotionModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h3 id="promotionModalTitle">Nueva Promoci√≥n</h3>
        <button class="modal-close" id="closePromotionModal">&times;</button>
      </div>
      <form id="promotionForm" class="modal-form">

        <!-- Image Upload Section (16:9) -->
        <div class="form-group">
          <label>Banner de la promoci√≥n (Formato 16:9)</label>
          <div class="image-upload-container wide">
            <div class="image-preview wide" id="promotionImagePreview">
              <i class="ri-image-add-line"></i>
              <p>Click para seleccionar imagen</p>
              <small>Recomendado: 1280x720px (JPG, PNG, WEBP)</small>
            </div>
            <input type="file" id="promotionImageInput" accept="image/jpeg,image/jpg,image/png,image/webp"
              style="display: none;">
            <div class="image-upload-actions" id="promotionImageActions" style="display: none;">
              <button type="button" class="btn-secondary-small" id="changePromotionImageBtn">
                <i class="ri-image-edit-line"></i> Cambiar
              </button>
              <button type="button" class="btn-secondary-small danger" id="removePromotionImageBtn">
                <i class="ri-delete-bin-line"></i> Eliminar
              </button>
            </div>
            <div class="image-upload-progress" id="promotionImageProgress" style="display: none;">
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
              <p>Subiendo imagen...</p>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="promotionTitleInput">T√≠tulo *</label>
            <input type="text" id="promotionTitleInput" placeholder="Ej: Combo Familiar" required>
          </div>
          <div class="form-group">
            <label for="promotionPriceInput">Precio *</label>
            <input type="number" id="promotionPriceInput" step="0.01" min="0" required>
          </div>
        </div>

        <div class="form-group">
          <label for="promotionDescriptionInput">Descripci√≥n</label>
          <textarea id="promotionDescriptionInput" rows="2"
            placeholder="Describe lo que incluye la promoci√≥n..."></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="promotionStartDate">Fecha inicio (opcional)</label>
            <input type="datetime-local" id="promotionStartDate">
          </div>
          <div class="form-group">
            <label for="promotionEndDate">Fecha fin (opcional)</label>
            <input type="datetime-local" id="promotionEndDate">
          </div>
        </div>

        <div class="form-group">
          <label class="switch-container">
            <input type="checkbox" id="promotionActiveInput" checked>
            <span class="switch-slider"></span>
            <span class="switch-label">Promoci√≥n activa</span>
          </label>
        </div>

        <!-- Campo oculto para la imagen -->
        <input type="hidden" id="promotionImageUrlHidden">

        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelPromotionBtn">Cancelar</button>
          <button type="submit" class="btn-primary" id="savePromotionBtn">Guardar Promoci√≥n</button>
        </div>
      </form>
    </div>
  </div>
</body>

</html>

<!-- comentario solo para comitear -->